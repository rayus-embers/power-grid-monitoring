<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive SVG</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <style>
    .context-menu {
      position: absolute;
      display: none;
      background-color: white;
      border: 1px solid #ccc;
      box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      padding: 10px;
    }

    .context-menu ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .context-menu ul li {
      padding: 8px 12px;
      cursor: pointer;
    }

    .context-menu ul li:hover {
      background-color: #f0f0f0;
    }

    .element { cursor: pointer; }
      * {
            box-sizing: border-box;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        
        .container {
            display: grid;
            grid-template-columns: 1fr; 
            grid-template-rows: auto;
            height: 100vh; 
            gap: 20px;
        }

        
        .svg-container {
            background-color: #f4f4f4;
            padding: 20px;
            height: 100%;
        }

        
        .right-section {
            display: grid;
            grid-template-rows: 50% 50%; 
            height: 100%;
            gap: 10px;
            padding: 20px;
        }

        
        .graph {
            background-color: #eef;
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .logs {
            background-color: #fee;
            padding: 10px;
            overflow-y: auto;
        }

        .hidden {
            display: none;
        }

        
        .container.split {
            grid-template-columns: 1fr 1fr; 
        }
  </style>
</head>
<body>
  <div class="container">
    <div class="svg-container">
<!-- Your SVG here -->
 <!-- This is an svg from draw.io to test the features to use your own svg you need to sepcify the id of the clickable elements to follow this pattern "substation;dev_typ;device" -->
<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="211px" height="390px" viewBox="-0.5 -0.5 211 390" content="&lt;mxfile host=&quot;app.diagrams.net&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36&quot; version=&quot;24.7.6&quot;&gt;&#10;  &lt;diagram name=&quot;Page-1&quot; id=&quot;9YOKSMpOtXlbkGX2V0Lo&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;1050&quot; dy=&quot;565&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;850&quot; pageHeight=&quot;1100&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;A4MkFlVzpAGJOdH1glzL-1&quot; value=&quot;&quot; style=&quot;sketch=0;points=[[0.015,0.015,0],[0.985,0.015,0],[0.985,0.985,0],[0.015,0.985,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];verticalLabelPosition=bottom;html=1;verticalAlign=top;aspect=fixed;align=center;pointerEvents=1;shape=mxgraph.cisco19.rect;prIcon=l2_switch;fillColor=#FAFAFA;strokeColor=#005073;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;350&quot; y=&quot;220&quot; width=&quot;50&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;A4MkFlVzpAGJOdH1glzL-2&quot; value=&quot;&quot; style=&quot;points=[[0.03,0.03,0],[0.5,0,0],[0.97,0.03,0],[1,0.4,0],[0.97,0.745,0],[0.5,1,0],[0.03,0.745,0],[0,0.4,0]];verticalLabelPosition=bottom;sketch=0;html=1;verticalAlign=top;aspect=fixed;align=center;pointerEvents=1;shape=mxgraph.cisco19.workstation;fillColor=#005073;strokeColor=none;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;350&quot; y=&quot;80&quot; width=&quot;62.5&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;A4MkFlVzpAGJOdH1glzL-3&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;A4MkFlVzpAGJOdH1glzL-2&quot; target=&quot;A4MkFlVzpAGJOdH1glzL-1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;A4MkFlVzpAGJOdH1glzL-4&quot; value=&quot;&quot; style=&quot;points=[[0.115,0.05,0],[0.335,0,0],[0.98,0.52,0],[1,0.71,0],[0.68,1,0],[0.065,0.76,0],[0,0.33,0],[0.68,0.33,0]];verticalLabelPosition=bottom;sketch=0;html=1;verticalAlign=top;aspect=fixed;align=center;pointerEvents=1;shape=mxgraph.cisco19.home_office;fillColor=#005073;strokeColor=none;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;510&quot; y=&quot;230&quot; width=&quot;50&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;A4MkFlVzpAGJOdH1glzL-5&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;A4MkFlVzpAGJOdH1glzL-4&quot; target=&quot;A4MkFlVzpAGJOdH1glzL-1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;A4MkFlVzpAGJOdH1glzL-6&quot; value=&quot;&quot; style=&quot;sketch=0;points=[[0.015,0.015,0],[0.985,0.015,0],[0.985,0.985,0],[0.015,0.985,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];verticalLabelPosition=bottom;html=1;verticalAlign=top;aspect=fixed;align=center;pointerEvents=1;shape=mxgraph.cisco19.handheld;fillColor=#005073;strokeColor=none;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;357&quot; y=&quot;420&quot; width=&quot;37.5&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;A4MkFlVzpAGJOdH1glzL-7&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;A4MkFlVzpAGJOdH1glzL-6&quot; target=&quot;A4MkFlVzpAGJOdH1glzL-1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;"><defs/><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="A4MkFlVzpAGJOdH1glzL-1" class="element" id='1'><g><rect x="0" y="140" width="50" height="50" fill="none" stroke="none" pointer-events="all"/><path d="M 3.07 140 C 1.38 140 0 141.37 0 143.05 L 0 186.95 C 0 188.63 1.38 190 3.07 190 L 46.93 190 C 48.62 190 50 188.63 50 186.95 L 50 143.05 C 50 141.37 48.62 140 46.93 140 Z" fill="#fafafa" stroke="none" pointer-events="all"/><rect x="0" y="140" width="50" height="50" fill="none" stroke="none" pointer-events="all"/><path d="M 23.38 180.52 L 23.38 176.53 L 12.78 176.53 L 12.78 173.39 L 3.75 178.71 L 12.78 183.96 L 12.78 180.52 Z M 28.32 161.46 L 28.32 157.48 L 17.73 157.48 L 17.73 154.33 L 8.7 159.66 L 17.73 164.9 L 17.73 161.46 Z M 22.38 171.06 L 22.38 167.08 L 32.98 167.08 L 32.98 163.93 L 42 169.26 L 32.98 174.51 L 32.98 171.06 Z M 26.96 152.32 L 26.96 148.34 L 37.55 148.34 L 37.55 145.2 L 46.58 150.52 L 37.55 155.77 L 37.55 152.32 Z M 3.07 140 C 1.38 140 0 141.37 0 143.05 L 0 186.95 C 0 188.63 1.38 190 3.07 190 L 46.93 190 C 48.62 190 50 188.63 50 186.95 L 50 143.05 C 50 141.37 48.62 140 46.93 140 Z M 3.07 141.38 L 46.93 141.38 C 47.88 141.38 48.62 142.11 48.62 143.05 L 48.62 186.95 C 48.62 187.89 47.88 188.62 46.93 188.62 L 3.07 188.62 C 2.12 188.62 1.38 187.89 1.38 186.95 L 1.38 143.05 C 1.38 142.11 2.12 141.38 3.07 141.38 Z" fill="#005073" stroke="none" pointer-events="all"/></g></g><g data-cell-id="A4MkFlVzpAGJOdH1glzL-2" class="element" id='2'><g><rect x="0" y="0" width="62.5" height="50" fill="none" stroke="none" pointer-events="all"/><path d="M 7.31 5.81 L 54.8 5.81 L 54.8 32.8 L 7.31 32.8 Z M 6.2 2.5 L 56.3 2.5 C 58.27 2.5 59.81 3.94 59.81 5.77 L 59.81 33.15 C 59.81 34.98 58.27 36.42 56.3 36.42 L 6.2 36.42 C 4.23 36.42 2.69 34.98 2.69 33.15 L 2.69 5.77 C 2.69 3.94 4.23 2.5 6.2 2.5 Z M 6.2 0 C 2.79 0 0 2.59 0 5.77 L 0 33.15 C 0 36.32 2.79 38.92 6.2 38.92 L 25.68 38.92 L 25.68 44.62 L 16.37 44.62 C 15.34 44.62 14.39 45.14 13.88 45.96 C 13.36 46.79 13.36 47.82 13.88 48.65 C 14.39 49.47 15.34 49.99 16.37 49.99 L 45.84 49.99 C 46.86 49.99 47.82 49.47 48.33 48.65 C 48.84 47.82 48.84 46.79 48.33 45.96 C 47.82 45.14 46.86 44.62 45.84 44.62 L 37.8 44.62 L 37.8 38.92 L 56.3 38.92 C 59.71 38.92 62.5 36.32 62.5 33.15 L 62.5 5.77 C 62.5 2.59 59.71 0 56.3 0 Z" fill="#005073" stroke="none" pointer-events="all"/></g></g><g data-cell-id="A4MkFlVzpAGJOdH1glzL-3" class="element" id='3'><g><path d="M 31.3 50 L 31.3 95 L 25 95 L 25 133.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 25 138.88 L 21.5 131.88 L 25 133.63 L 28.5 131.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="A4MkFlVzpAGJOdH1glzL-4" class="element" id='Bouchamma;Tran;Bh1'><g><rect x="160" y="150" width="50" height="50" fill="none" stroke="none" pointer-events="all"/><path d="M 176.98 150 L 170.63 156.1 L 170.63 152.4 L 165.69 152.4 L 165.69 160.93 L 160 166.38 L 163.23 166.38 L 163.23 188.23 L 177.75 188.23 L 177.75 192.27 C 177.75 193.95 179.19 195.32 180.94 195.32 L 190.86 195.32 L 190.86 197.37 L 186.5 197.37 C 185.74 197.37 185.13 197.96 185.13 198.68 C 185.13 199.41 185.74 199.99 186.5 199.99 L 201.25 199.99 C 202.01 199.99 202.62 199.41 202.62 198.68 C 202.62 197.96 202.01 197.37 201.25 197.37 L 196.9 197.37 L 196.9 195.32 L 206.81 195.32 C 208.56 195.32 210 193.95 210 192.27 L 210 178.08 C 210 176.4 208.56 175.03 206.81 175.03 L 190.81 175.03 L 190.81 166.38 L 193.96 166.38 Z M 164.87 166.38 L 189.17 166.38 L 189.17 175.03 L 180.94 175.03 C 179.19 175.03 177.75 176.4 177.75 178.08 L 177.75 186.66 L 164.87 186.66 Z M 180.94 176.6 L 206.81 176.6 C 207.68 176.6 208.36 177.25 208.36 178.08 L 208.36 192.27 C 208.36 193.11 207.68 193.75 206.81 193.75 L 180.94 193.75 C 180.07 193.75 179.39 193.11 179.39 192.27 L 179.39 178.08 C 179.39 177.25 180.07 176.6 180.94 176.6 Z M 181.64 178.25 L 181.64 192.04 L 206.12 192.04 L 206.12 178.25 Z" fill="#005073" stroke="none" pointer-events="all"/></g></g><g data-cell-id="A4MkFlVzpAGJOdH1glzL-5" class="element" id='Bouchamma;150-LN;Bh-G'><g><path d="M 160 175 L 105 175 L 105 165 L 56.37 165" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 51.12 165 L 58.12 161.5 L 56.37 165 L 58.12 168.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="A4MkFlVzpAGJOdH1glzL-6" class="element" id='6'><g><rect x="7" y="340" width="37.5" height="50" fill="none" stroke="none" pointer-events="all"/><path d="M 27.48 384.75 C 27.48 385.75 26.7 386.55 25.73 386.55 C 24.77 386.55 23.99 385.75 23.98 384.75 C 23.98 384.28 24.17 383.82 24.5 383.48 C 24.82 383.14 25.27 382.95 25.73 382.95 C 26.7 382.95 27.48 383.76 27.48 384.75 Z M 26.65 344.03 C 26.65 344.28 26.55 344.52 26.37 344.7 C 26.2 344.88 25.96 344.99 25.71 344.99 C 25.2 344.99 24.78 344.56 24.78 344.03 C 24.78 343.49 25.2 343.07 25.71 343.07 C 25.96 343.07 26.2 343.17 26.37 343.35 C 26.55 343.53 26.65 343.77 26.65 344.03 Z M 10.59 346.49 L 40.95 346.49 L 40.95 381.2 L 10.59 381.2 Z M 9.86 340 C 8.29 340 7 341.33 7 342.95 L 7 387.05 C 7 388.67 8.29 390 9.86 390 L 41.64 390 C 43.21 390 44.5 388.67 44.5 387.05 L 44.5 342.95 C 44.5 341.33 43.21 340 41.64 340 Z M 9.86 341.66 L 41.64 341.66 C 42.35 341.66 42.89 342.22 42.89 342.95 L 42.89 387.05 C 42.89 387.78 42.35 388.34 41.64 388.34 L 9.86 388.34 C 9.15 388.34 8.61 387.78 8.61 387.05 L 8.61 342.95 C 8.61 342.22 9.15 341.66 9.86 341.66 Z" fill="#005073" stroke="none" pointer-events="all"/></g></g><g data-cell-id="A4MkFlVzpAGJOdH1glzL-7" class="element" id='7'><g><path d="M 25.8 340 L 25.8 265 L 25.07 196.37" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 25.01 191.12 L 28.59 198.08 L 25.07 196.37 L 21.59 198.15 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g></g></g></g></svg></div>
<div class="right-section hidden">
  <div class="graph">
      <canvas id="deviceChart"></canvas>
  </div>
  <div class="logs" id="logs">
    <h3>Logs</h3>
  </div>
</div>
</div>
<div id="custom-context-menu" class="context-menu">
  <ul>
      <li data-days="7">7 days</li>
      <li data-days="30">30 days</li>
      <li data-days="90">90 days</li>
  </ul>
</div>
<script>
  let chartInstance = null;
  function handleEvent(event) {
            const element = event.currentTarget;
            const [substation,dev_typ, device] = element.id.split(';'); 
            document.querySelector('.container').classList.add('split');
            document.querySelector('.right-section').classList.remove('hidden');

            switch (event.type) {
                case 'click':
                    fetchGraph(substation, device,  dev_typ);

                    fetchLogs(substation, device, dev_typ);
                    break;

                case 'contextmenu':
                    event.preventDefault();
                    console.log(`Right-clicked on ${element.textContent}`);
                    break;
            }
        }

        function fetchGraph(substation, device, dev_typ, days=30) {
            const ctx = document.getElementById('deviceChart').getContext('2d');
            //fetch values from API
            fetch(`http://127.0.0.1:8000/api/values/?device=${device}&substation=${substation}&dev_typ=${dev_typ}&days=${days}`)
                .then(response => response.json())
                .then(data => {
                    const labels = data.map(item => new Date(item.time).toLocaleString());
                    const values = data.map(item => item.value);
                    const unit = data[0].unit;
                    datasetLabel = `${device} ${dev_typ} at ${substation}`;
                    
                    if (window.deviceChartInstance ) {
                      const existingDataset = window.deviceChartInstance.data.datasets.find(dataset => dataset.label === datasetLabel);
                      console.log(existingDataset);
                      if(existingDataset === undefined){
                        window.deviceChartInstance.data.datasets.push({
                          label: `${device} ${dev_typ} at ${substation}`,
                          data: values,
                          borderColor: getRandomColor(),  // Different color for each line
                          backgroundColor: 'rgba(75, 192, 192, 0.2)',
                          fill: true,
                        });
                        window.deviceChartInstance.update();
                      }
                      
                    }

                    // Create a new chart
                    else{window.deviceChartInstance = new Chart(ctx, {
                          type: 'line',
                          data: {
                              labels: labels,
                              datasets: [{
                                  label: datasetLabel,
                                  data: values,
                                  borderColor: 'rgba(75, 192, 192, 1)',
                                  backgroundColor: 'rgba(75, 192, 192, 0.2)',
                                  fill: true,
                              }]
                          },
                          options: {
                              responsive: true,
                              scales: {
                                  x: {
                                      title: { display: true, text: 'Time' },
                                      ticks : {
                                        callback: function(value, index) {
                                          return index % 5 === 0 ? this.getLabelForValue(value) : '';
                                        }
                                      }
                                  },
                                  y: {
                                      title: { display: true, text: unit },
                                      beginAtZero: true,
                                  }
                              }
                          }
                      });
                    }
                })
                .catch(error => {
                    console.error('Error fetching graph data:', error);
                });
        }

        function fetchLogs(substation, device, dev_typ, days=30) {
            // Fetch logs from the API
            fetch(`http://127.0.0.1:8000/api/logs/?device=${device}&substation=${substation}&dev_typ=${dev_typ}&days=${days}`)
                .then(response => response.json())
                .then(data => {
                    const logId = `${device}-logs-${substation}-${dev_typ}`;
                    const logsDiv = document.getElementById('logs');
                    let existingLogs = document.getElementById(logId); 

                    if (existingLogs) {
                        return;
                    }
                    const logContainer = document.createElement('div');
                    logContainer.id = logId; 
                    logContainer.classList.add('log-container');
                    data.forEach(log => {
                        const logEntry = document.createElement('div');
                        const alert = get_alert(log.danger);
                        const [day, time] = log.time.split('T')
                        logEntry.innerHTML = `
                          <div class="alert alert-${alert}" role="alert">
                            <p><strong>${log.title}</strong></p>
                            <p>${log.description}</p>
                            <p><em>On ${day} at ${time.slice(0, -1)}</em> - ${log.danger}</p>
                          </div>
                        `;
                        logContainer.appendChild(logEntry);
                    });
                        logsDiv.appendChild(logContainer);
                })
                .catch(error => {
                    console.error('Error fetching logs:', error);
                });
        }
        function get_alert(danger){
          switch(danger){
            case "Casual":
              return "secondary";
              break;
            case "Warning":
              return "warning";
              break;
            case "Dangerous":
              return "danger";
              break;
          }
        }
        const contextMenu = document.getElementById('custom-context-menu');
        let clickedElement = null;
        function handleContextMenu(event) {
          event.preventDefault(); 
          clickedElement = event.currentTarget;
          console.log(`Right-clicked on ${clickedElement.id}`);

          contextMenu.style.top = `${event.pageY}px`;
          contextMenu.style.left = `${event.pageX}px`;

          contextMenu.style.display = 'block';
        }

        function handleMenuOptionClick(event) {
            const days = event.target.getAttribute('data-days');
            console.log(`Selected ${days} days`);

            contextMenu.style.display = 'none';
            document.querySelector('.container').classList.add('split');
            document.querySelector('.right-section').classList.remove('hidden');
            const [substation, dev_typ, device] = clickedElement.id.split(';');
            fetchGraph(substation, device,  dev_typ, days);
            fetchLogs(substation, device, dev_typ, days);
            
        }
        function getRandomColor() {
          const letters = '0123456789ABCDEF';
          let color = '#';
          for (let i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
          }
          return color;
        }
        document.addEventListener('click', (event) => {
          if (contextMenu.style.display === 'block') {
            contextMenu.style.display = 'none';
          }
        });
        const elements = document.querySelectorAll('.element');
        elements.forEach(element => {
            element.addEventListener('click', handleEvent); 
            element.addEventListener('contextmenu', handleContextMenu); 
        });
        const menuOptions = document.querySelectorAll('#custom-context-menu li');
        menuOptions.forEach(option => {
          option.addEventListener('click', handleMenuOptionClick);
        });

    </script>

</body>
</html>
